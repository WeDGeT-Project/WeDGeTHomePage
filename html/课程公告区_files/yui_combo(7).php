/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("classnamemanager",function(c){var b="classNamePrefix",d="classNameDelimiter",a=c.config;a[b]=a[b]||"yui3";a[d]=a[d]||"-";c.ClassNameManager=function(){var e=a[b],f=a[d];return{getClassName:c.cached(function(){var g=c.Array(arguments);if(g[g.length-1]!==true){g.unshift(e);}else{g.pop();}return g.join(f);})};}();},"3.4.1",{requires:["yui-base"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("attribute-complex",function(b){var a=b.Object,c=".";b.Attribute.Complex=function(){};b.Attribute.Complex.prototype={_normAttrVals:function(g){var i={},h={},j,d,f,e;if(g){for(e in g){if(g.hasOwnProperty(e)){if(e.indexOf(c)!==-1){j=e.split(c);d=j.shift();f=h[d]=h[d]||[];f[f.length]={path:j,value:g[e]};}else{i[e]=g[e];}}}return{simple:i,complex:h};}else{return null;}},_getAttrInitVal:function(m,j,p){var e=j.value,o=j.valueFn,d,f,h,g,q,n,k;if(o){if(!o.call){o=this[o];}if(o){e=o.call(this);}}if(!j.readOnly&&p){d=p.simple;if(d&&d.hasOwnProperty(m)){e=d[m];}f=p.complex;if(f&&f.hasOwnProperty(m)){k=f[m];for(h=0,g=k.length;h<g;++h){q=k[h].path;n=k[h].value;a.setValue(e,q,n);}}}return e;}};b.mix(b.Attribute,b.Attribute.Complex,true,null,1);},"3.4.1",{requires:["attribute-base"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("plugin",function(b){function a(c){if(!(this.hasImpl&&this.hasImpl(b.Plugin.Base))){a.superclass.constructor.apply(this,arguments);}else{a.prototype.initializer.apply(this,arguments);}}a.ATTRS={host:{writeOnce:true}};a.NAME="plugin";a.NS="plugin";b.extend(a,b.Base,{_handles:null,initializer:function(c){this._handles=[];},destructor:function(){if(this._handles){for(var d=0,c=this._handles.length;d<c;d++){this._handles[d].detach();}}},doBefore:function(g,d,c){var e=this.get("host"),f;if(g in e){f=this.beforeHostMethod(g,d,c);}else{if(e.on){f=this.onHostEvent(g,d,c);}}return f;},doAfter:function(g,d,c){var e=this.get("host"),f;if(g in e){f=this.afterHostMethod(g,d,c);}else{if(e.after){f=this.afterHostEvent(g,d,c);}}return f;},onHostEvent:function(e,d,c){var f=this.get("host").on(e,d,c||this);this._handles.push(f);return f;},afterHostEvent:function(e,d,c){var f=this.get("host").after(e,d,c||this);this._handles.push(f);return f;},beforeHostMethod:function(f,d,c){var e=b.Do.before(d,this.get("host"),f,c||this);this._handles.push(e);return e;},afterHostMethod:function(f,d,c){var e=b.Do.after(d,this.get("host"),f,c||this);this._handles.push(e);return e;},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]";}});b.namespace("Plugin").Base=a;},"3.4.1",{requires:["base-base"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-simulate",function(a){(function(){var k=a.Lang,j=a.Array,f=k.isFunction,d=k.isString,g=k.isBoolean,o=k.isObject,n=k.isNumber,m=a.config.doc,p={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1},l={keydown:1,keyup:1,keypress:1},c={blur:1,change:1,focus:1,resize:1,scroll:1,select:1},e={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};a.mix(e,p);a.mix(e,l);function i(v,z,u,s,B,r,q,A,x,D,C){if(!v){a.error("simulateKeyEvent(): Invalid target.");}if(d(z)){z=z.toLowerCase();switch(z){case"textevent":z="keypress";break;case"keyup":case"keydown":case"keypress":break;default:a.error("simulateKeyEvent(): Event type '"+z+"' not supported.");}}else{a.error("simulateKeyEvent(): Event type must be a string.");}if(!g(u)){u=true;}if(!g(s)){s=true;}if(!o(B)){B=window;}if(!g(r)){r=false;}if(!g(q)){q=false;}if(!g(A)){A=false;}if(!g(x)){x=false;}if(!n(D)){D=0;}if(!n(C)){C=0;}var y=null;if(f(m.createEvent)){try{y=m.createEvent("KeyEvents");y.initKeyEvent(z,u,s,B,r,q,A,x,D,C);}catch(w){try{y=m.createEvent("Events");}catch(t){y=m.createEvent("UIEvents");}finally{y.initEvent(z,u,s);y.view=B;y.altKey=q;y.ctrlKey=r;y.shiftKey=A;y.metaKey=x;y.keyCode=D;y.charCode=C;}}v.dispatchEvent(y);}else{if(o(m.createEventObject)){y=m.createEventObject();y.bubbles=u;y.cancelable=s;y.view=B;y.ctrlKey=r;y.altKey=q;y.shiftKey=A;y.metaKey=x;y.keyCode=(C>0)?C:D;v.fireEvent("on"+z,y);}else{a.error("simulateKeyEvent(): No event simulation framework present.");}}}function b(A,F,x,u,G,z,w,v,t,r,s,q,E,C,y,B){if(!A){a.error("simulateMouseEvent(): Invalid target.");}if(d(F)){F=F.toLowerCase();if(!p[F]){a.error("simulateMouseEvent(): Event type '"+F+"' not supported.");}}else{a.error("simulateMouseEvent(): Event type must be a string.");}if(!g(x)){x=true;}if(!g(u)){u=(F!="mousemove");}if(!o(G)){G=window;}if(!n(z)){z=1;}if(!n(w)){w=0;}if(!n(v)){v=0;}if(!n(t)){t=0;}if(!n(r)){r=0;}if(!g(s)){s=false;}if(!g(q)){q=false;}if(!g(E)){E=false;}if(!g(C)){C=false;}if(!n(y)){y=0;}B=B||null;var D=null;if(f(m.createEvent)){D=m.createEvent("MouseEvents");if(D.initMouseEvent){D.initMouseEvent(F,x,u,G,z,w,v,t,r,s,q,E,C,y,B);}else{D=m.createEvent("UIEvents");D.initEvent(F,x,u);D.view=G;D.detail=z;D.screenX=w;D.screenY=v;D.clientX=t;D.clientY=r;D.ctrlKey=s;D.altKey=q;D.metaKey=C;D.shiftKey=E;D.button=y;D.relatedTarget=B;}if(B&&!D.relatedTarget){if(F=="mouseout"){D.toElement=B;}else{if(F=="mouseover"){D.fromElement=B;}}}A.dispatchEvent(D);}else{if(o(m.createEventObject)){D=m.createEventObject();D.bubbles=x;D.cancelable=u;D.view=G;D.detail=z;D.screenX=w;D.screenY=v;D.clientX=t;D.clientY=r;D.ctrlKey=s;D.altKey=q;D.metaKey=C;D.shiftKey=E;switch(y){case 0:D.button=1;break;case 1:D.button=4;break;case 2:break;default:D.button=0;}D.relatedTarget=B;A.fireEvent("on"+F,D);}else{a.error("simulateMouseEvent(): No event simulation framework present.");}}}function h(w,v,s,r,q,u){if(!w){a.error("simulateUIEvent(): Invalid target.");}if(d(v)){v=v.toLowerCase();if(!c[v]){a.error("simulateUIEvent(): Event type '"+v+"' not supported.");}}else{a.error("simulateUIEvent(): Event type must be a string.");}var t=null;if(!g(s)){s=(v in e);}if(!g(r)){r=(v=="submit");}if(!o(q)){q=window;}if(!n(u)){u=1;}if(f(m.createEvent)){t=m.createEvent("UIEvents");t.initUIEvent(v,s,r,q,u);w.dispatchEvent(t);}else{if(o(m.createEventObject)){t=m.createEventObject();t.bubbles=s;t.cancelable=r;t.view=q;t.detail=u;w.fireEvent("on"+v,t);}else{a.error("simulateUIEvent(): No event simulation framework present.");}}}a.Event.simulate=function(s,r,q){q=q||{};if(p[r]){b(s,r,q.bubbles,q.cancelable,q.view,q.detail,q.screenX,q.screenY,q.clientX,q.clientY,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.button,q.relatedTarget);}else{if(l[r]){i(s,r,q.bubbles,q.cancelable,q.view,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.keyCode,q.charCode);}else{if(c[r]){h(s,r,q.bubbles,q.cancelable,q.view,q.detail);}else{a.error("simulate(): Event '"+r+"' can't be simulated.");}}}};})();},"3.4.1",{requires:["event-base"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-event-simulate",function(a){a.Node.prototype.simulate=function(c,b){a.Event.simulate(a.Node.getDOMNode(this),c,b);};},"3.4.1",{requires:["node-base","event-simulate"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-key",function(g){var e="+alt",c="+ctrl",d="+meta",b="+shift",a=g.Lang.trim,f={KEY_MAP:{enter:13,esc:27,backspace:8,tab:9,pageup:33,pagedown:34},_typeRE:/^(up|down|press):/,_keysRE:/^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,processArgs:function(m){var p=m.splice(3,1)[0],o=g.Array.hash(p.match(/\+(?:alt|ctrl|meta|shift)\b/g)||[]),j={type:this._typeRE.test(p)?RegExp.$1:null,mods:o,keys:null},n=p.replace(this._keysRE,""),k,q,h,l;if(n){n=n.split(",");j.keys={};for(l=n.length-1;l>=0;--l){k=a(n[l]);if(!k){continue;}if(+k==k){j.keys[k]=o;}else{h=k.toLowerCase();if(this.KEY_MAP[h]){j.keys[this.KEY_MAP[h]]=o;if(!j.type){j.type="down";}}else{q=k.charAt(0).toUpperCase();h=h.charAt(0);j.keys[q.charCodeAt(0)]=(h!==q&&k===q)?g.merge(o,{"+shift":true}):o;}}}}if(!j.type){j.type="press";}return j;},on:function(n,k,m,j){var h=k._extra,i="key"+h.type,l=h.keys,o=(j)?"delegate":"on";k._detach=n[o](i,function(q){var p=l?l[q.keyCode]:h.mods;if(p&&(!p[e]||(p[e]&&q.altKey))&&(!p[c]||(p[c]&&q.ctrlKey))&&(!p[d]||(p[d]&&q.metaKey))&&(!p[b]||(p[b]&&q.shiftKey))){m.fire(q);}},j);},detach:function(j,h,i){h._detach.detach();}};f.delegate=f.on;f.detachDelegate=f.detach;g.Event.define("key",f,true);},"3.4.1",{requires:["event-synthetic"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-focus",function(e){var d=e.Event,c=e.Lang,a=c.isString,b=c.isFunction(e.DOM.create('<p onbeforeactivate=";"/>').onbeforeactivate);function f(h,g,j){var i="_"+h+"Notifiers";e.Event.define(h,{_attach:function(l,m,k){if(e.DOM.isWindow(l)){return d._attach([h,function(n){m.fire(n);},l]);}else{return d._attach([g,this._proxy,l,this,m,k],{capture:true});}},_proxy:function(o,s,p){var m=o.target,q=m.getData(i),t=e.stamp(o.currentTarget._node),k=(b||o.target!==o.currentTarget),l=s.handle.sub,r=[m,o].concat(l.args||[]),n;s.currentTarget=(p)?m:o.currentTarget;s.container=(p)?o.currentTarget:null;if(!l.filter||l.filter.apply(m,r)){if(!q){q={};m.setData(i,q);if(k){n=d._attach([j,this._notify,m._node]).sub;n.once=true;}}if(!q[t]){q[t]=[];}q[t].push(s);if(!k){this._notify(o);}}},_notify:function(p,l){var m=p.currentTarget,r=m.getData(i),s=m.get("ownerDocument")||m,q=m,k=[],t,n,o;if(r){while(q&&q!==s){k.push.apply(k,r[e.stamp(q)]||[]);q=q.get("parentNode");}k.push.apply(k,r[e.stamp(s)]||[]);for(n=0,o=k.length;n<o;++n){t=k[n];p.currentTarget=k[n].currentTarget;if(t.container){p.container=t.container;}t.fire(p);}m.clearData(i);}},on:function(m,k,l){k.onHandle=this._attach(m._node,l);},detach:function(l,k){k.onHandle.detach();},delegate:function(n,l,m,k){if(a(k)){l.filter=e.delegate.compileFilter(k);}l.delegateHandle=this._attach(n._node,m,true);},detachDelegate:function(l,k){k.delegateHandle.detach();}},true);}if(b){f("focus","beforeactivate","focusin");f("blur","beforedeactivate","focusout");}else{f("focus","focus","focus");f("blur","blur","blur");}},"3.4.1",{requires:["event-synthetic"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-focusmanager",function(b){var j="activeDescendant",l="id",i="disabled",n="tabIndex",e="focused",a="focusClass",q="circular",c="UI",f="key",g=j+"Change",o="host",p={37:true,38:true,39:true,40:true},m={"a":true,"button":true,"input":true,"object":true},h=b.Lang,k=b.UA,d=function(){d.superclass.constructor.apply(this,arguments);};d.ATTRS={focused:{value:false,readOnly:true},descendants:{getter:function(r){return this.get(o).all(r);}},activeDescendant:{setter:function(v){var t=h.isNumber,s=b.Attribute.INVALID_VALUE,r=this._descendantsMap,y=this._descendants,x,u,w;if(t(v)){x=v;u=x;}else{if((v instanceof b.Node)&&r){x=r[v.get(l)];if(t(x)){u=x;}else{u=s;}}else{u=s;}}if(y){w=y.item(x);if(w&&w.get("disabled")){u=s;}}return u;}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:true}};b.extend(d,b.Plugin.Base,{_stopped:true,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var y=this.get("descendants"),r={},w=-1,v,u=this.get(j),x,s,t=0;if(h.isUndefined(u)){u=-1;}if(y){v=y.size();for(t=0;t<v;t++){x=y.item(t);if(w===-1&&!x.get(i)){w=t;}if(u<0&&parseInt(x.getAttribute(n,2),10)===0){u=t;}if(x){x.set(n,-1);}s=x.get(l);if(!s){s=b.guid();x.set(l,s);}r[s]=t;}if(u<0){u=0;}x=y.item(u);if(!x||x.get(i)){x=y.item(w);u=w;}this._lastNodeIndex=v-1;this._descendants=y;this._descendantsMap=r;this.set(j,u);if(x){x.set(n,0);}}},_isDescendant:function(r){return(r.get(l) in this._descendantsMap);},_removeFocusClass:function(){var s=this._focusedNode,t=this.get(a),r;if(t){r=h.isString(t)?t:t.className;}if(s&&r){s.removeClass(r);}},_detachKeyHandler:function(){var s=this._prevKeyHandler,r=this._nextKeyHandler;if(s){s.detach();}if(r){r.detach();}},_preventScroll:function(r){if(p[r.keyCode]&&this._isDescendant(r.target)){r.preventDefault();}},_fireClick:function(s){var r=s.target,t=r.get("nodeName").toLowerCase();if(s.keyCode===13&&(!m[t]||(t==="a"&&!r.getAttribute("href")))){r.simulate("click");}},_attachKeyHandler:function(){this._detachKeyHandler();var u=this.get("keys.next"),s=this.get("keys.previous"),t=this.get(o),r=this._eventHandlers;if(s){this._prevKeyHandler=b.on(f,b.bind(this._focusPrevious,this),t,s);}if(u){this._nextKeyHandler=b.on(f,b.bind(this._focusNext,this),t,u);}if(k.opera){r.push(t.on("keypress",this._preventScroll,this));}if(!k.opera){r.push(t.on("keypress",this._fireClick,this));}},_detachEventHandlers:function(){this._detachKeyHandler();var r=this._eventHandlers;if(r){b.Array.each(r,function(s){s.detach();});this._eventHandlers=null;}},_attachEventHandlers:function(){var u=this._descendants,r,s,t;if(u&&u.size()){r=this._eventHandlers||[];s=this.get(o).get("ownerDocument");if(r.length===0){r.push(s.on("focus",this._onDocFocus,this));r.push(s.on("mousedown",this._onDocMouseDown,this));r.push(this.after("keysChange",this._attachKeyHandler));r.push(this.after("descendantsChange",this._initDescendants));r.push(this.after(g,this._afterActiveDescendantChange));t=this.after("focusedChange",b.bind(function(v){if(v.newVal){this._attachKeyHandler();t.detach();}},this));r.push(t);}this._eventHandlers=r;}},_onDocMouseDown:function(u){var w=this.get(o),r=u.target,v=w.contains(r),t,s=function(y){var x=false;if(!y.compareTo(w)){x=this._isDescendant(y)?y:s.call(this,y.get("parentNode"));}return x;};if(v){t=s.call(this,r);if(t){r=t;}else{if(!t&&this.get(e)){this._set(e,false);this._onDocFocus(u);}}}if(v&&this._isDescendant(r)){this.focus(r);}else{if(k.webkit&&this.get(e)&&(!v||(v&&!this._isDescendant(r)))){this._set(e,false);this._onDocFocus(u);}}},_onDocFocus:function(w){var u=this._focusTarget||w.target,s=this.get(e),v=this.get(a),t=this._focusedNode,r;if(this._focusTarget){this._focusTarget=null;}if(this.get(o).contains(u)){r=this._isDescendant(u);if(!s&&r){s=true;}else{if(s&&!r){s=false;}}}else{s=false;}if(v){if(t&&(!t.compareTo(u)||!s)){this._removeFocusClass();}if(r&&s){if(v.fn){u=v.fn(u);u.addClass(v.className);}else{u.addClass(v);}this._focusedNode=u;}}this._set(e,s);},_focusNext:function(s,t){var r=t||this.get(j),u;if(this._isDescendant(s.target)&&(r<=this._lastNodeIndex)){r=r+1;if(r===(this._lastNodeIndex+1)&&this.get(q)){r=0;}u=this._descendants.item(r);if(u){if(u.get("disabled")){this._focusNext(s,r);}else{this.focus(r);}}}this._preventScroll(s);},_focusPrevious:function(s,t){var r=t||this.get(j),u;if(this._isDescendant(s.target)&&r>=0){r=r-1;if(r===-1&&this.get(q)){r=this._lastNodeIndex;}u=this._descendants.item(r);if(u){if(u.get("disabled")){this._focusPrevious(s,r);}else{this.focus(r);}}}this._preventScroll(s);},_afterActiveDescendantChange:function(r){var s=this._descendants.item(r.prevVal);if(s){s.set(n,-1);}s=this._descendants.item(r.newVal);if(s){s.set(n,0);}},initializer:function(r){this.start();},destructor:function(){this.stop();this.get(o).focusManager=null;},focus:function(r){if(h.isUndefined(r)){r=this.get(j);}this.set(j,r,{src:c});var s=this._descendants.item(this.get(j));if(s){s.focus();if(k.opera&&s.get("nodeName").toLowerCase()==="button"){this._focusTarget=s;}}},blur:function(){var r;if(this.get(e)){r=this._descendants.item(this.get(j));if(r){r.blur();this._removeFocusClass();}this._set(e,false,{src:c});}},start:function(){if(this._stopped){this._initDescendants();this._attachEventHandlers();this._stopped=false;}},stop:function(){if(!this._stopped){this._detachEventHandlers();this._descendants=null;this._focusedNode=null;this._lastNodeIndex=0;this._stopped=true;}},refresh:function(){this._initDescendants();if(!this._eventHandlers){this._attachEventHandlers();}}});d.NAME="nodeFocusManager";d.NS="focusManager";b.namespace("Plugin");b.Plugin.NodeFocusManager=d;},"3.4.1",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});/*
YUI 3.4.1 (build 4118)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-menunav",function(d){var L=d.UA,T=d.later,am=d.ClassNameManager.getClassName,r="menu",g="menuitem",ai="hidden",s="parentNode",v="children",aa="offsetHeight",ad="offsetWidth",ao="px",F="id",i=".",e="handledMouseOut",R="handledMouseOver",z="active",ak="label",C="a",W="mousedown",ap="keydown",ac="click",q="",u="first-of-type",aq="role",n="presentation",ae="descendants",I="UI",U="activeDescendant",j="useARIA",X="aria-hidden",Z="content",B="host",G=U+"Change",V="autoSubmenuDisplay",t="mouseOutHideDelay",K=am(r),ag=am(r,ai),y=am(r,"horizontal"),aj=am(r,ak),J=am(r,ak,z),x=am(r,ak,(r+"visible")),k=am(g),a=am(g,z),H=i+K,ah=(i+am(r,"toggle")),M=i+am(r,Z),ar=i+aj,an=">"+M+">ul>li>a",o=">"+M+">ul>li>"+ar+">a:first-child";var l=function(Y){var au=Y.previous(),at;if(!au){at=Y.get(s).get(v);au=at.item(at.size()-1);}return au;};var A=function(Y){var at=Y.next();if(!at){at=Y.get(s).get(v).item(0);}return at;};var f=function(Y){var at=false;if(Y){at=Y.get("nodeName").toLowerCase()===C;}return at;};var p=function(Y){return Y.hasClass(k);};var S=function(Y){return Y.hasClass(aj);};var Q=function(Y){return Y.hasClass(y);};var N=function(Y){return Y.hasClass(x);};var P=function(Y){return f(Y)?Y:Y.one(C);};var ab=function(au,at,Y){var av;if(au){if(au.hasClass(at)){av=au;}if(!av&&Y){av=au.ancestor((i+at));}}return av;};var m=function(Y){return Y.ancestor(H);};var w=function(at,Y){return ab(at,K,Y);};var af=function(at,Y){var au;if(at){au=ab(at,k,Y);}return au;};var O=function(at,Y){var au;if(at){if(Y){au=ab(at,aj,Y);}else{au=ab(at,aj)||at.one((i+aj));}}return au;};var b=function(at,Y){var au;if(at){au=af(at,Y)||O(at,Y);}return au;};var c=function(Y){return b(Y.one("li"));};var E=function(Y){return p(Y)?a:J;};var D=function(Y,at){return Y&&!Y[R]&&(Y.compareTo(at)||Y.contains(at));};var h=function(at,Y){return at&&!at[e]&&(!at.compareTo(Y)&&!at.contains(Y));};var al=function(){al.superclass.constructor.apply(this,arguments);};al.NAME="nodeMenuNav";al.NS="menuNav";al.SHIM_TEMPLATE_TITLE="Menu Stacking Shim";al.SHIM_TEMPLATE='<iframe frameborder="0" tabindex="-1" class="'+am("shim")+'" title="'+al.SHIM_TEMPLATE_TITLE+'" src="javascript:false;"></iframe>';al.ATTRS={useARIA:{value:true,writeOnce:true,lazyAdd:false,setter:function(aw){var at=this.get(B),ax,Y,av,au;if(aw){at.set(aq,r);at.all("ul,li,"+M).set(aq,n);at.all((i+am(g,Z))).set(aq,g);at.all((i+aj)).each(function(ay){ax=ay;Y=ay.one(ah);if(Y){Y.set(aq,n);ax=Y.previous();}ax.set(aq,g);ax.set("aria-haspopup",true);av=ay.next();if(av){av.set(aq,r);ax=av.previous();Y=ax.one(ah);if(Y){ax=Y;}au=d.stamp(ax);if(!ax.get(F)){ax.set(F,au);}av.set("aria-labelledby",au);av.set(X,true);}});}}},autoSubmenuDisplay:{value:true,writeOnce:true},submenuShowDelay:{value:250,writeOnce:true},submenuHideDelay:{value:250,writeOnce:true},mouseOutHideDelay:{value:750,writeOnce:true}};d.extend(al,d.Plugin.Base,{_rootMenu:null,_activeItem:null,_activeMenu:null,_hasFocus:false,_blockMouseEvent:false,_currentMouseX:0,_movingToSubmenu:false,_showSubmenuTimer:null,_hideSubmenuTimer:null,_hideAllSubmenusTimer:null,_firstItem:null,initializer:function(au){var av=this,aw=this.get(B),at=[],Y;if(aw){av._rootMenu=aw;aw.all("ul:first-child").addClass(u);aw.all(H).addClass(ag);at.push(aw.on("mouseover",av._onMouseOver,av));at.push(aw.on("mouseout",av._onMouseOut,av));at.push(aw.on("mousemove",av._onMouseMove,av));at.push(aw.on(W,av._toggleSubmenuDisplay,av));at.push(d.on("key",av._toggleSubmenuDisplay,aw,"down:13",av));at.push(aw.on(ac,av._toggleSubmenuDisplay,av));at.push(aw.on("keypress",av._onKeyPress,av));at.push(aw.on(ap,av._onKeyDown,av));Y=aw.get("ownerDocument");at.push(Y.on(W,av._onDocMouseDown,av));at.push(Y.on("focus",av._onDocFocus,av));this._eventHandlers=at;av._initFocusManager();}},destructor:function(){var Y=this._eventHandlers;if(Y){d.Array.each(Y,function(at){at.detach();});this._eventHandlers=null;}this.get(B).unplug("focusManager");},_isRoot:function(Y){return this._rootMenu.compareTo(Y);},_getTopmostSubmenu:function(av){var au=this,Y=m(av),at;if(!Y){at=av;}else{if(au._isRoot(Y)){at=av;}else{at=au._getTopmostSubmenu(Y);}}return at;},_clearActiveItem:function(){var at=this,Y=at._activeItem;if(Y){Y.removeClass(E(Y));}at._activeItem=null;},_setActiveItem:function(at){var Y=this;if(at){Y._clearActiveItem();at.addClass(E(at));Y._activeItem=at;}},_focusItem:function(au){var at=this,Y,av;if(au&&at._hasFocus){Y=m(au);av=P(au);if(Y&&!Y.compareTo(at._activeMenu)){at._activeMenu=Y;at._initFocusManager();}at._focusManager.focus(av);}},_showMenu:function(av){var Y=m(av),au=av.get(s),at=au.getXY();if(this.get(j)){av.set(X,false);}if(Q(Y)){at[1]=at[1]+au.get(aa);}else{at[0]=at[0]+au.get(ad);}av.setXY(at);if(L.ie<8){if(L.ie===6&&!av.hasIFrameShim){av.appendChild(d.Node.create(al.SHIM_TEMPLATE));av.hasIFrameShim=true;}av.setStyles({height:q,width:q});av.setStyles({height:(av.get(aa)+ao),width:(av.get(ad)+ao)});}av.previous().addClass(x);av.removeClass(ag);},_hideMenu:function(av,at){var au=this,aw=av.previous(),Y;aw.removeClass(x);if(at){au._focusItem(aw);au._setActiveItem(aw);}Y=av.one((i+a));if(Y){Y.removeClass(a);}av.setStyles({left:q,top:q});av.addClass(ag);if(au.get(j)){av.set(X,true);}},_hideAllSubmenus:function(at){var Y=this;at.all(H).each(d.bind(function(au){Y._hideMenu(au);},Y));},_cancelShowSubmenuTimer:function(){var at=this,Y=at._showSubmenuTimer;if(Y){Y.cancel();at._showSubmenuTimer=null;}},_cancelHideSubmenuTimer:function(){var Y=this,at=Y._hideSubmenuTimer;if(at){at.cancel();Y._hideSubmenuTimer=null;}},_initFocusManager:function(){var av=this,ax=av._rootMenu,at=av._activeMenu||ax,aw=av._isRoot(at)?q:("#"+at.get("id")),Y=av._focusManager,au,ay,az;if(Q(at)){ay=aw+an+","+aw+o;au={next:"down:39",previous:"down:37"};}else{ay=aw+an;au={next:"down:40",previous:"down:38"};}if(!Y){ax.plug(d.Plugin.NodeFocusManager,{descendants:ay,keys:au,circular:true});Y=ax.focusManager;az="#"+ax.get("id")+H+" a,"+ah;ax.all(az).set("tabIndex",-1);Y.on(G,this._onActiveDescendantChange,Y,this);Y.after(G,this._afterActiveDescendantChange,Y,this);
av._focusManager=Y;}else{Y.set(U,-1);Y.set(ae,ay);Y.set("keys",au);}},_onActiveDescendantChange:function(at,Y){if(at.src===I&&Y._activeMenu&&!Y._movingToSubmenu){Y._hideAllSubmenus(Y._activeMenu);}},_afterActiveDescendantChange:function(at,Y){var au;if(at.src===I){au=b(this.get(ae).item(at.newVal),true);Y._setActiveItem(au);}},_onDocFocus:function(aw){var av=this,Y=av._activeItem,au=aw.target,at;if(av._rootMenu.contains(au)){if(av._hasFocus){at=m(au);if(!av._activeMenu.compareTo(at)){av._activeMenu=at;av._initFocusManager();av._focusManager.set(U,au);av._setActiveItem(b(au,true));}}else{av._hasFocus=true;Y=b(au,true);if(Y){av._setActiveItem(Y);}}}else{av._clearActiveItem();av._cancelShowSubmenuTimer();av._hideAllSubmenus(av._rootMenu);av._activeMenu=av._rootMenu;av._initFocusManager();av._focusManager.set(U,0);av._hasFocus=false;}},_onMenuMouseOver:function(av,au){var at=this,Y=at._hideAllSubmenusTimer;if(Y){Y.cancel();at._hideAllSubmenusTimer=null;}at._cancelHideSubmenuTimer();if(av&&!av.compareTo(at._activeMenu)){at._activeMenu=av;if(at._hasFocus){at._initFocusManager();}}if(at._movingToSubmenu&&Q(av)){at._movingToSubmenu=false;}},_hideAndFocusLabel:function(){var au=this,at=au._activeMenu,Y;au._hideAllSubmenus(au._rootMenu);if(at){Y=au._getTopmostSubmenu(at);au._focusItem(Y.previous());}},_onMenuMouseOut:function(az,ax){var aw=this,au=aw._activeMenu,ay=ax.relatedTarget,Y=aw._activeItem,av,at;if(au&&!au.contains(ay)){av=m(au);if(av&&!av.contains(ay)){if(aw.get(t)>0){aw._cancelShowSubmenuTimer();aw._hideAllSubmenusTimer=T(aw.get(t),aw,aw._hideAndFocusLabel);}}else{if(Y){at=m(Y);if(!aw._isRoot(at)){aw._focusItem(at.previous());}}}}},_onMenuLabelMouseOver:function(av,Y){var at=this,aw=at._activeMenu,az=at._isRoot(aw),au=(at.get(V)&&az||!az),ax=at.get("submenuShowDelay"),ay;var aA=function(aB){at._cancelHideSubmenuTimer();at._cancelShowSubmenuTimer();if(!N(av)){ay=av.next();if(ay){at._hideAllSubmenus(aw);at._showSubmenuTimer=T(aB,at,at._showMenu,ay);}}};at._focusItem(av);at._setActiveItem(av);if(au){if(at._movingToSubmenu){d.message("Pause path");at._hoverTimer=T(ax,at,function(){aA(0);});}else{aA(ax);}}},_onMenuLabelMouseOut:function(aw,ay){var ax=this,at=ax._isRoot(ax._activeMenu),av=(ax.get(V)&&at||!at),az=ay.relatedTarget,au=aw.next(),Y=ax._hoverTimer;if(Y){Y.cancel();}ax._clearActiveItem();if(av){if(ax._movingToSubmenu&&!ax._showSubmenuTimer&&au){ax._hideSubmenuTimer=T(ax.get("submenuHideDelay"),ax,ax._hideMenu,au);}else{if(!ax._movingToSubmenu&&au&&(!az||(az&&!au.contains(az)&&!az.compareTo(au)))){ax._cancelShowSubmenuTimer();ax._hideMenu(au);}}}},_onMenuItemMouseOver:function(av,ax){var aw=this,au=aw._activeMenu,Y=aw._isRoot(au),at=(aw.get(V)&&Y||!Y);aw._focusItem(av);aw._setActiveItem(av);if(at&&!aw._movingToSubmenu){aw._hideAllSubmenus(au);}},_onMenuItemMouseOut:function(Y,at){this._clearActiveItem();},_onVerticalMenuKeyDown:function(Y){var at=this,ax=at._activeMenu,aC=at._rootMenu,au=Y.target,aw=false,aB=Y.keyCode,az,av,ay,aA;switch(aB){case 37:av=m(ax);if(av&&Q(av)){at._hideMenu(ax);ay=l(ax.get(s));aA=b(ay);if(aA){if(S(aA)){az=aA.next();if(az){at._showMenu(az);at._focusItem(c(az));at._setActiveItem(c(az));}else{at._focusItem(aA);at._setActiveItem(aA);}}else{at._focusItem(aA);at._setActiveItem(aA);}}}else{if(!at._isRoot(ax)){at._hideMenu(ax,true);}}aw=true;break;case 39:if(S(au)){az=au.next();if(az){at._showMenu(az);at._focusItem(c(az));at._setActiveItem(c(az));}}else{if(Q(aC)){az=at._getTopmostSubmenu(ax);ay=A(az.get(s));aA=b(ay);at._hideAllSubmenus(aC);if(aA){if(S(aA)){az=aA.next();if(az){at._showMenu(az);at._focusItem(c(az));at._setActiveItem(c(az));}else{at._focusItem(aA);at._setActiveItem(aA);}}else{at._focusItem(aA);at._setActiveItem(aA);}}}}aw=true;break;}if(aw){Y.preventDefault();}},_onHorizontalMenuKeyDown:function(ay){var ax=this,av=ax._activeMenu,at=ay.target,Y=b(at,true),aw=false,az=ay.keyCode,au;if(az===40){ax._hideAllSubmenus(av);if(S(Y)){au=Y.next();if(au){ax._showMenu(au);ax._focusItem(c(au));ax._setActiveItem(c(au));}aw=true;}}if(aw){ay.preventDefault();}},_onMouseMove:function(at){var Y=this;T(10,Y,function(){Y._currentMouseX=at.pageX;});},_onMouseOver:function(aw){var av=this,at,Y,ay,au,ax;if(av._blockMouseEvent){av._blockMouseEvent=false;}else{at=aw.target;Y=w(at,true);ay=O(at,true);ax=af(at,true);if(D(Y,at)){av._onMenuMouseOver(Y,aw);Y[R]=true;Y[e]=false;au=m(Y);if(au){au[e]=true;au[R]=false;}}if(D(ay,at)){av._onMenuLabelMouseOver(ay,aw);ay[R]=true;ay[e]=false;}if(D(ax,at)){av._onMenuItemMouseOver(ax,aw);ax[R]=true;ax[e]=false;}}},_onMouseOut:function(at){var au=this,aw=au._activeMenu,aB=false,av,ax,az,Y,ay,aA;au._movingToSubmenu=(aw&&!Q(aw)&&((at.pageX-5)>au._currentMouseX));av=at.target;ax=at.relatedTarget;az=w(av,true);Y=O(av,true);aA=af(av,true);if(h(Y,ax)){au._onMenuLabelMouseOut(Y,at);Y[e]=true;Y[R]=false;}if(h(aA,ax)){au._onMenuItemMouseOut(aA,at);aA[e]=true;aA[R]=false;}if(Y){ay=Y.next();if(ay&&ax&&(ax.compareTo(ay)||ay.contains(ax))){aB=true;}}if(h(az,ax)||aB){au._onMenuMouseOut(az,at);az[e]=true;az[R]=false;}},_toggleSubmenuDisplay:function(au){var av=this,aw=au.target,at=O(aw,true),Y=au.type,aA,az,ay,aB,aC,ax;if(at){aA=f(aw)?aw:aw.ancestor(f);if(aA){ay=aA.getAttribute("href",2);aB=ay.indexOf("#");aC=ay.length;if(aB===0&&aC>1){ax=ay.substr(1,aC);az=at.next();if(az&&(az.get(F)===ax)){if(Y===W||Y===ap){if((L.opera||L.gecko||L.ie)&&Y===ap&&!av._preventClickHandle){av._preventClickHandle=av._rootMenu.on("click",function(aD){aD.preventDefault();av._preventClickHandle.detach();av._preventClickHandle=null;});}if(Y==W){au.preventDefault();au.stopImmediatePropagation();av._hasFocus=true;}if(av._isRoot(m(aw))){if(N(at)){av._hideMenu(az);av._focusItem(at);av._setActiveItem(at);}else{av._hideAllSubmenus(av._rootMenu);av._showMenu(az);av._focusItem(c(az));av._setActiveItem(c(az));}}else{if(av._activeItem==at){av._showMenu(az);av._focusItem(c(az));av._setActiveItem(c(az));}else{if(!at._clickHandle){at._clickHandle=at.on("click",function(){av._hideAllSubmenus(av._rootMenu);
av._hasFocus=false;av._clearActiveItem();at._clickHandle.detach();at._clickHandle=null;});}}}}if(Y===ac){au.preventDefault();}}}}}},_onKeyPress:function(Y){switch(Y.keyCode){case 37:case 38:case 39:case 40:Y.preventDefault();break;}},_onKeyDown:function(ax){var aw=this,Y=aw._activeItem,at=ax.target,av=m(at),au;if(av){aw._activeMenu=av;if(Q(av)){aw._onHorizontalMenuKeyDown(ax);}else{aw._onVerticalMenuKeyDown(ax);}if(ax.keyCode===27){if(!aw._isRoot(av)){if(L.opera){T(0,aw,function(){aw._hideMenu(av,true);});}else{aw._hideMenu(av,true);}ax.stopPropagation();aw._blockMouseEvent=L.gecko?true:false;}else{if(Y){if(S(Y)&&N(Y)){au=Y.next();if(au){aw._hideMenu(au);}}else{aw._focusManager.blur();aw._clearActiveItem();aw._hasFocus=false;}}}}}},_onDocMouseDown:function(av){var au=this,at=au._rootMenu,Y=av.target;if(!(at.compareTo(Y)||at.contains(Y))){au._hideAllSubmenus(at);if(L.webkit){au._hasFocus=false;au._clearActiveItem();}}}});d.namespace("Plugin");d.Plugin.NodeMenuNav=al;},"3.4.1",{requires:["node","classnamemanager","node-focusmanager","plugin"]});